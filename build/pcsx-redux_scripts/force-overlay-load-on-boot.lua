jit.off()

-- local overlay = 's19br'
-- local overlay = 'abst'
-- local overlay = 'brf'
-- local overlay = 'camera'
local overlay = 'change'
-- local overlay = 'd00a'
-- local overlay = 'd01a'
-- local overlay = 'd03a'
-- local overlay = 'd11c'
-- local overlay = 'd16e'
-- local overlay = 'd18a'
-- local overlay = 'd18ar'
-- local overlay = 'demosel'
-- local overlay = 'ending'
-- local overlay = 'endingr'
-- local overlay = 'opening'
-- local overlay = 'option'
-- local overlay = 'preope'
-- local overlay = 'rank'
-- local overlay = 'roll'
-- local overlay = 's00a'
-- local overlay = 's01a'
-- local overlay = 's02a'
-- local overlay = 's02b'
-- local overlay = 's02c'
-- local overlay = 's02d'
-- local overlay = 's02e'
-- local overlay = 's03a'
-- local overlay = 's03ar'
-- local overlay = 's03b'
-- local overlay = 's03c'
-- local overlay = 's03d'
-- local overlay = 's03dr'
-- local overlay = 's03e'
-- local overlay = 's03er'
-- local overlay = 's04a'
-- local overlay = 's04b'
-- local overlay = 's04br'
-- local overlay = 's04c'
-- local overlay = 's05a'
-- local overlay = 's06a'
-- local overlay = 's07a'
-- local overlay = 's07b'
-- local overlay = 's07br'
-- local overlay = 's07c'
-- local overlay = 's07cr'
-- local overlay = 's08a'
-- local overlay = 's08b'
-- local overlay = 's08br'
-- local overlay = 's08c'
-- local overlay = 's08cr'
-- local overlay = 's09a'
-- local overlay = 's09ar'
-- local overlay = 's10a'
-- local overlay = 's10ar'
-- local overlay = 's11a'
-- local overlay = 's11b'
-- local overlay = 's11c'
-- local overlay = 's11d'
-- local overlay = 's11e'
-- local overlay = 's11g'
-- local overlay = 's11h'
-- local overlay = 's11i'
-- local overlay = 's12a'
-- local overlay = 's12b'
-- local overlay = 's12c'
-- local overlay = 's13a'
-- local overlay = 's14e'
-- local overlay = 's15a'
-- local overlay = 's15b'
-- local overlay = 's15c'
-- local overlay = 's16a'
-- local overlay = 's16b'
-- local overlay = 's16c'
-- local overlay = 's16d'
-- local overlay = 's17a'
-- local overlay = 's17ar'
-- local overlay = 's18a'
-- local overlay = 's18ar'
-- local overlay = 's19a'
-- local overlay = 's19ar'
-- local overlay = 's19b'
-- local overlay = 's19br'
-- local overlay = 's20a'
-- local overlay = 's20ar'
-- local overlay = 'select'
-- local overlay = 'select1'
-- local overlay = 'select2'
-- local overlay = 'select3'
-- local overlay = 'select4'
-- local overlay = 'selectd'
-- local overlay = 'sound'
-- local overlay = 'title'

if loader_bp == nil then                                                                                                    
    loader_bp = PCSX.addBreakpoint(0x800236E0, 'Exec', 4, 'loader', function()                                              
       local regs = PCSX.getRegisters()                                                                                    
       local addr = bit.band(regs.GPR.n.a0, 0x1fffff)     
       local mem = PCSX.getMemPtr()
       local ptr = ffi.cast('uint8_t*', mem + addr)                                                                        
       local i = 0
       for c in overlay:gmatch('.') do
           ptr[i] = string.byte(c)
           i = i + 1
       end
       ptr[i] = 0
       print('forcing load of overlay:', overlay)
    end)                                                                                                                    
end       
